<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MagiQuest</title>
    <script>
        let quests = [];
    </script>
  </head>
  <body class="vh-100 w-100 m-0 p-0">

    <input type="text" placeholder="Enter Quest Title" name="title" id="title" required>
    <input type="text" placeholder="Enter Quest Details" name="details" id="titleDetails" required>
    <button type="button" id="submitQuest" name="submitQuest">Submit Quest</button>
    <button type="button" id="deleteQuest" name="deleteQuest">Delete Quest</button>
    <button type="button" id="readQuest" name="readQuest">Read Quest</button>
    
    <script>
            quests.forEach((doc) => {
                <h1>${doc.title}</h1>
            })
    </script>

    <!-- <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, setDoc, addDoc, deleteDoc, getDocs, doc, collection} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAL3NGHFIDXyOGpuYRwgTOOw-iIubf6KgE",
          authDomain: "daanoymichael.firebaseapp.com",
          databaseURL: "https://daanoymichael-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "daanoymichael",
          storageBucket: "daanoymichael.appspot.com",
          messagingSenderId: "167008676312",
          appId: "1:167008676312:web:4a44cb5ab117c522ddaaad",
          measurementId: "G-B8G3DNFPHY"
        };
      
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        readQuest.addEventListener('click', (e) => {
            const q = collection(db, "quests");
            getDocs(q).then(docSnap => {
                docSnap.forEach((doc) => {
                    quests.push({ ...doc.data(), id:doc.id})
                });
                console.log("Document Data:", quests);
            })    
        })

        submitQuest.addEventListener('click', (e) => {
            var title = document.getElementById('title').value;
            var details = document.getElementById('titleDetails').value;

            addDoc(collection(db, "quests"), {
                title: title,
                // author: author,
                details: details
            })

            alert('Quest Added');
        })

        deleteQuest.addEventListener('click', (e) => {
            deleteDoc(doc(
                db,
                "quests", 
                // docID
            ));
        })
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const loadEl = document.querySelector("#load");
        // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
        // // The Firebase SDK is initialized and available here!
        //
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
        // firebase.firestore().doc('/foo/bar').get().then(() => { });
        // firebase.functions().httpsCallable('yourFunction')().then(() => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        // firebase.analytics(); // call to activate
        // firebase.analytics().logEvent('tutorial_completed');
        // firebase.performance(); // call to activate
        //
        // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

        try {
          let app = firebase.app();
          let features = [
            "auth",
            "database",
            "firestore",
            "functions",
            "messaging",
            "storage",
            "analytics",
            "remoteConfig",
            "performance",
          ].filter((feature) => typeof app[feature] === "function");
          loadEl.textContent = `Firebase SDK loaded with ${features.join(
            ", "
          )}`;
        } catch (e) {
          console.error(e);
          loadEl.textContent =
            "Error loading the Firebase SDK, check the console.";
        }
      });
    </script> -->
  </body>
</html>
